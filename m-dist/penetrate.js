!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.penetrate=t():e.penetrate=t()}(window,function(){return function(e){var t={};function l(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,l),r.l=!0,r.exports}return l.m=e,l.c=t,l.d=function(e,t,o){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(l.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(o,r,function(t){return e[t]}.bind(null,r));return o},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=0)}([function(e,t,l){"use strict";l.r(t);const o={topics:[],add(e,t,l,o={}){this.topics.push({target:e,event:t,fn:l}),e.addEventListener(t,l,o)},removeAll(){this.topics.forEach(e=>{e.target.removeEventListener(e.event,e.fn)})},preventDefault(e){e.preventDefault()}};t.default={data:()=>({containerElem:null,containerElemHeight:0,scrollElem:null,scrollElemHeight:0,scrollElemScrollTop:0,startY:0}),computed:{isScrollTop(){return 0===this.scrollElemScrollTop},isScrollBottom(){return!!this.scrollElem&&this.scrollElemScrollTop+this.scrollElemHeight===this.containerElemHeight}},directives:{penetrate:{bind(e,t,l){const r=l.context,{contentPanelClass:n,scrollElemClass:s,containerElemClass:i}=t.value;if(o.add(e,"touchmove",o.preventDefault),!r.scrollElem&&(r.scrollElem=r.getChildByClass(e,s),!r.scrollElem))throw new Error("scrollElemClass 不存在");if(o.add(r.scrollElem,"scroll",e=>{r.scrollElemScrollTop=e.target.scrollTop},{passive:!0}),o.add(r.scrollElem,"touchstart",e=>{r.handleStart.call(r,e)}),o.add(r.scrollElem,"touchmove",e=>{e.stopPropagation(),r.handleMove.call(r,e)}),!r.containerElem&&(r.containerElem=r.getChildByClass(r.scrollElem,i),!r.containerElem))throw new Error("containerElemClass 不存在")},inserted(e,t,l){const o=l.context;o.scrollElemHeight=o.scrollElem.offsetHeight,o.containerElemHeight=o.containerElem.offsetHeight},unbind(e,t,l){const r=l.context;o.removeAll(),r.resetAll.call(r)}}},methods:{resetAll(){this.containerElem=null,this.containerElemHeight=0,this.scrollElem=null,this.scrollElemHeight=0,this.scrollElemScrollTop=0,this.startY=0},preventDefault(e){e.preventDefault()},getChildByClass(e,t){if(e.childNodes&&e.childNodes.length){const l=e.childNodes;for(let e=0;e<l.length;e++){if(l[e].classList&&l[e].classList.contains(t))return l[e];if(l[e].classList){const o=this.getChildByClass(l[e],t);if(o)return o}}}},handleStart(e){this.startY=e.touches[0].screenY},handleMove(e){const t=e.touches[0].screenY;let l;t>this.startY?(this.startY=t,l="down"):t<this.startY&&(this.startY=t,l="up"),("up"===l&&this.isScrollBottom||"down"===l&&this.isScrollTop)&&e.preventDefault()}}}}])});
//# sourceMappingURL=penetrate.js.map